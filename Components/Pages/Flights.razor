@page "/flights"
@inject DataManager DataManager

<h2>Flight Finder</h2>

<label>From: </label>
<input type="text" @bind="from" placeholder="Enter Origin" />

<label>To: </label>
<input type="text" @bind="to" placeholder="Enter Destination" />

<label>Day: </label>
<input type="text" @bind="day" placeholder="Enter Day" />

<button type="button" @onclick="SearchFlights">Find Flights</button>

<h2>Flights</h2>
@if (flights.Count > 0)
{
        <ul>
        @foreach (var flight in flights)
        {
                <li>@flight.FlightCode - @flight.Airline - @flight.DepartureTime</li>
        }
        </ul>
}
else
{
            <p>No flights found. Try different search criteria.</p>
}


@code {
    private string from = "";
    private string to = "";
    private string day = "";
    private List<Flight> flights = new List<Flight>();

    void SearchFlights()
    {
        Console.WriteLine($"Searching for flights from: {from}, to: {to}, on: {day}");

        // Call the DataManager to get flights
        flights = DataManager.FindFlights(from, to, day);

        // Log the number of flights found
        Console.WriteLine($"Found {flights.Count} flights.");
    }
}

